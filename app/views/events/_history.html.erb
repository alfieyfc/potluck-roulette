<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Event Name</th>
      <th scope="col">Room ID</th>
      <th scope="col">Players</th>
      <th scope="col">Date</th>
      <th scope="col">Host</th>
    </tr>
  </thead>
  <tbody>
  <% Event.joins(:participations).where("user_id = ?", current_user.id).order(event_date: :desc).each do |event| %>
      <tr>
        <td>
          <%= event.title %>
        </td>
        <td>
          <% if user_signed_in? %>
          <%= link_to event.room_id, event, style: "font-family: Monospace;"  %>
          <% else %>
          <span style="font-family: Monospace;"><%= event.room_id %></span>
          <% end %>
        </td>
        <td>
          <% current_player_count = Participation.where(event_id: event.id).count %>
          <% if current_player_count < event.max_players && Date.today < event.event_date %>
            <% room_availability = "color: green" %>
          <% else %>
            <% room_availability = "color: grey; font-style: italic" %>
          <% end %>
          <span style="<%= room_availability %>"><%= current_player_count %>/<%= event.max_players %></span>
        <td>
          <i><%= event.event_date %></i>
        </td>
        <td>
          <strong><i><%= User.find_by(id: event.owner).name %></i></strong>
        </td>
      </tr>
  <% end %>

  </tbody>
</table>
